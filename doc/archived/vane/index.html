
<!DOCTYPE html>
<html>
<head><script src="//archive.org/includes/analytics.js?v=cf34f82" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app39.us.archive.org';v.server_ms=272;archive_analytics.send_pageview({});});</script>
<script type="text/javascript" src="/static/js/ait-client-rewrite.js?v=1544499711.0" charset="utf-8"></script>
<script type="text/javascript">
WB_wombat_Init('https://web.archive.org/web', '20150401020727', 'www.dartvoid.com:80');
</script>
<script type="text/javascript" src="/static/js/wbhack.js?v=1544499711.0" charset="utf-8"></script>
<script type="text/javascript">
__wbhack.init('https://web.archive.org/web');
</script>
<link rel="stylesheet" type="text/css" href="/static/css/banner-styles.css?v=1544499711.0" />
<link rel="stylesheet" type="text/css" href="/static/css/iconochive.css?v=1544499711.0" />
<!-- End Wayback Rewrite JS Include -->

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="DartVoid is an application hosting platform for Dart. Deploy your full-stack Dart applications in a simple way today.">
  <meta itemprop="name" content="DartVoid · Vane">
  <meta itemprop="description" content="DartVoid is an application hosting platform for Dart. Deploy your full-stack Dart applications in a simple way today.">
  <meta itemprop="image" content="http://www.dartvoid.com/assets/img/dartvoid-figure-horizontal-500x695.png">
  <meta property="og:title" content="DartVoid · Vane">
  <meta property="og:image" content="https://web.archive.org/web/20150401020727im_/http://www.dartvoid.com/assets/img/dartvoid-figure-horizontal-500x695.png">
  <meta property="og:description" content="DartVoid is an application hosting platform for Dart. Deploy your full-stack Dart applications in a simple way today.">

  <meta name="alexaVerifyID" content="c_dKvoAIWBKjpCK9Kla5E8AzQX4"/>
  <meta name="google-site-verification" content="6Yq4U5ZHy1LdfnOX-UsyVgHaeBKWNQlp8V3K3mCln3M"/>

  <title>DartVoid &middot; Vane</title>

  <!-- Site CSS -->
  <link rel="stylesheet" href="/web/20150401020727cs_/http://www.dartvoid.com:80/assets/css/bundle.css">
  <link href="https://web.archive.org/web/20150401020727cs_/http://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
    
  <!-- Favicon -->
  <link rel="shortcut icon" href="/web/20150401020727im_/http://www.dartvoid.com:80/assets/img/ico/favicon.png"> 

  <!-- Zendesk Widget -->
  <script>/*<![CDATA[*/window.zEmbed||function(e,t){var n,o,d,i,s,a=[],r=document.createElement("iframe");window.zEmbed=function(){a.push(arguments)},window.zE=window.zE||window.zEmbed,r.src="javascript:false",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="display: none",d=document.getElementsByTagName("script"),d=d[d.length-1],d.parentNode.insertBefore(r,d),i=r.contentWindow,s=i.document;try{o=s}catch(c){n=document.domain,r.src='javascript:var d=document.open();d.domain="'+n+'";void(0);',o=s}o.open()._l=function(){var o=this.createElement("script");n&&(this.domain=n),o.id="js-iframe-async",o.src=e,this.t=+new Date,this.zendeskHost=t,this.zEQueue=a,this.body.appendChild(o)},o.write('<body onload="document._l();">'),o.close()}("//web.archive.org/web/20150401020727/http://assets.zendesk.com/embeddable_framework/main.js","dartvoid.zendesk.com");/*]]>*/</script>

</head>
<body onload="prettyPrint()"><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script type="text/javascript" src="/static/js/timestamp.js?v=1544499711.0" charset="utf-8"></script>
<script type="text/javascript" src="/static/js/graph-calc.js?v=1544499711.0" charset="utf-8"></script>
<script type="text/javascript" src="/static/js/auto-complete.js?v=1544499711.0" charset="utf-8"></script>
<script type="text/javascript" src="/static/js/toolbar.js?v=1544499711.0" charset="utf-8"></script>
<style type="text/css">
body {
  margin-top:0 !important;
  padding-top:0 !important;
  /*min-width:800px !important;*/
}
.wb-autocomplete-suggestions {
    text-align: left; cursor: default; border: 1px solid #ccc; border-top: 0; background: #fff; box-shadow: -1px 1px 3px rgba(0,0,0,.1);
    position: absolute; display: none; z-index: 2147483647; max-height: 254px; overflow: hidden; overflow-y: auto; box-sizing: border-box;
}
.wb-autocomplete-suggestion { position: relative; padding: 0 .6em; line-height: 23px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: 1.02em; color: #333; }
.wb-autocomplete-suggestion b { font-weight: bold; }
.wb-autocomplete-suggestion.selected { background: #f0f0f0; }
</style>
<div id="wm-ipp" lang="en" style="display:none;direction:ltr;">
<div style="position:fixed;left:0;top:0;right:0;">
<div id="wm-ipp-inside">
  <div style="position:relative;">
    <div id="wm-logo" style="float:left;width:130px;padding-top:10px;">
      <a href="/web/" title="Wayback Machine home page"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0" /></a>
    </div>
    <div class="r" style="float:right;">
      <div id="wm-btns" style="text-align:right;height:25px;">
                  <div id="wm-save-snapshot-success">success</div>
          <div id="wm-save-snapshot-fail">fail</div>
          <a href="#"
             onclick="__wm.saveSnapshot('http://www.dartvoid.com:80/vane', '20150401020727')"
             title="Share via My Web Archive"
             id="wm-save-snapshot-open"
          >
            <span class="iconochive-web"></span>
          </a>
          <a href="https://archive.org/account/login.php"
             title="Sign In"
             id="wm-sign-in"
          >
            <span class="iconochive-person"></span>
          </a>
          <span id="wm-save-snapshot-in-progress" class="iconochive-web"></span>
        	<a href="http://faq.web.archive.org/" title="Get some help using the Wayback Machine" style="top:-6px;"><span class="iconochive-question" style="color:rgb(87,186,244);font-size:160%;"></span></a>
	<a id="wm-tb-close" href="#close" onclick="__wm.h(event);return false;" style="top:-2px;" title="Close the toolbar"><span class="iconochive-remove-circle" style="color:#888888;font-size:240%;"></span></a>
      </div>
      <div id="wm-share" style="text-align:right;">
	<a href="#" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=https://web.archive.org/web/20150401020727/http://www.dartvoid.com:80/vane', '', 'height=400,width=600'); return false;" title="Share on Facebook" style="margin-right:5px;" target="_blank"><span class="iconochive-facebook" style="color:#3b5998;font-size:160%;"></span></a>
	<a href="#" onclick="window.open('https://twitter.com/intent/tweet?text=https://web.archive.org/web/20150401020727/http://www.dartvoid.com:80/vane&amp;via=internetarchive', '', 'height=400,width=600'); return false;" title="Share on Twitter" style="margin-right:5px;" target="_blank"><span class="iconochive-twitter" style="color:#1dcaff;font-size:160%;"></span></a>
      </div>
    </div>
    <table class="c" style="">
      <tbody>
	<tr>
	  <td class="u" colspan="2">
	    <form target="_top" method="get" action="/web/submit" name="wmtb" id="wmtb"><input type="text" name="url" id="wmtbURL" value="http://www.dartvoid.com:80/vane" onfocus="this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20150401020727" /><input type="submit" value="Go" /></form>
	  </td>
	  <td class="n" rowspan="2" style="width:110px;">
	    <table>
	      <tbody>
		<!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
		<tr class="m">
		  <td class="b" nowrap="nowrap"><a href="https://web.archive.org/web/20150220011356/http://www.dartvoid.com:80/vane/" title="20 Feb 2015"><strong>Feb</strong></a></td>
		  <td class="c" id="displayMonthEl" title="You are here: 02:07:27 Apr 01, 2015">APR</td>
		  <td class="f" nowrap="nowrap"><a href="https://web.archive.org/web/20150502001800/http://www.dartvoid.com:80/vane" title="02 May 2015"><strong>May</strong></a></td>
		</tr>
		<!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
		<tr class="d">
		  <td class="b" nowrap="nowrap"><a href="https://web.archive.org/web/20150301140814/http://www.dartvoid.com:80/vane" title="14:08:14 Mar 01, 2015"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a></td>
		  <td class="c" id="displayDayEl" style="width:34px;font-size:24px;white-space:nowrap;" title="You are here: 02:07:27 Apr 01, 2015">01</td>
		  <td class="f" nowrap="nowrap"><a href="https://web.archive.org/web/20150502001800/http://www.dartvoid.com:80/vane" title="00:18:00 May 02, 2015"><img src="/static/images/toolbar/wm_tb_nxt_on.png" alt="Next capture" width="14" height="16" border="0" /></a></td>
		</tr>
		<!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
		<tr class="y">
		  <td class="b" nowrap="nowrap">2014</td>
		  <td class="c" id="displayYearEl" title="You are here: 02:07:27 Apr 01, 2015">2015</td>
		  <td class="f" nowrap="nowrap"><a href="https://web.archive.org/web/20160409034043/http://www.dartvoid.com:80/vane" title="09 Apr 2016"><strong>2016</strong></a></td>
		</tr>
	      </tbody>
	    </table>
	  </td>
	</tr>
	<tr>
	  <td class="s">
	    	    <div id="wm-nav-captures">
	      	      <a class="t" href="/web/20150401020727*/http://www.dartvoid.com:80/vane" title="See a list of every capture for this URL">18 captures</a>
	      <div class="r" title="Timespan for captures of this URL">23 May 2014 - 09 Apr 2016</div>
	      </div>
	  </td>
	  <td class="k">
	    <a href="" id="wm-graph-anchor">
	      <div id="wm-ipp-sparkline" title="Explore captures for this URL" style="position: relative">
		<canvas id="wm-sparkline-canvas" width="600" height="27" border="0"></canvas>
	      </div>
	    </a>
	  </td>
	</tr>
      </tbody>
    </table>
    <div style="position:absolute;bottom:0;right:2px;text-align:right;">
      <a id="wm-expand" class="wm-btn wm-closed" href="#expand" onclick="__wm.ex(event);return false;"><span id="wm-expand-icon" class="iconochive-down-solid"></span> <span style="font-size:80%">About this capture</span></a>
    </div>
  </div>
    <div id="wm-capinfo" style="border-top:1px solid #777;display:none; overflow: hidden">
            <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center">COLLECTED BY</div>
    <div style="padding:3px;position:relative" id="wm-collected-by-content">
            <div style="display:inline-block;vertical-align:top;width:50%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/alexacrawls);"></span>
		Organization: <a style="color:#33f;" href="https://archive.org/details/alexacrawls" target="_new"><span class="wm-title">Alexa Crawls</span></a>
		<div style="max-height:75px;overflow:hidden;position:relative;">
	  <div style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);"></div>
	  Starting in 1996, <a href="http://www.alexa.com/">Alexa Internet</a> has been donating their crawl data to the Internet Archive.  Flowing in every day, these data are added to the <a href="http://web.archive.org/">Wayback Machine</a> after an embargo period.
	</div>
	      </div>
      <div style="display:inline-block;vertical-align:top;width:49%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/alexacrawls)"></span>
		<div>Collection: <a style="color:#33f;" href="https://archive.org/details/alexacrawls" target="_new"><span class="wm-title">Alexa Crawls</span></a></div>
		<div style="max-height:75px;overflow:hidden;position:relative;">
	  <div style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);"></div>
	  Starting in 1996, <a href="http://www.alexa.com/">Alexa Internet</a> has been donating their crawl data to the Internet Archive.  Flowing in every day, these data are added to the <a href="http://web.archive.org/">Wayback Machine</a> after an embargo period.
	</div>
	      </div>
    </div>
    <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center" title="Timestamps for the elements of this page">TIMESTAMPS</div>
    <div>
      <div id="wm-capresources" style="margin:0 5px 5px 5px;max-height:250px;overflow-y:scroll !important"></div>
      <div id="wm-capresources-loading" style="text-align:left;margin:0 20px 5px 5px;display:none"><img src="/static/images/loading.gif" alt="loading" /></div>
    </div>
  </div></div></div></div><script type="text/javascript">
__wm.bt(600,27,25,2,"web","http://www.dartvoid.com:80/vane","2015-04-01",1996);
</script>
<!-- END WAYBACK TOOLBAR INSERT -->

  <div class="navbar navbar-default navbar-static-top site-nav" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".navbar-collapse-header">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="/web/20150401020727/http://www.dartvoid.com:80/" class="navbar-brand">
          
	<svg class="navbar-brand-logo" xmlns="http://www.w3.org/2000/svg" preserveaspectratio="xMidYMid meet" viewbox="0 0 1300 500"><g><path d="M54.406 169.06c0 82.495 66.874 149.365 149.368 149.365 82.49 0 149.364-66.87 149.364-149.365 0-82.497-66.874-149.367-149.364-149.367-82.494 0-149.368 66.87-149.368 149.367" fill="#3a80cb"/><path d="M94.058 169.06c0 71.543 58 129.54 129.542 129.54 71.543 0 129.538-57.997 129.538-129.54 0-71.547-57.995-129.54-129.538-129.54S94.058 97.512 94.058 169.06" fill="#4ba5e0"/><path d="M45.08 88.038l383.71 66.89v5.28H12.393c-7.8 0 29.794-71.662 32.687-72.17" fill="#55c5a9"/><path d="M45.08 255.723l383.71-66.885v-5.28H12.393c-7.8 0 29.794 71.664 32.687 72.165" fill="#55c5a9"/><path d="M244.867 218.15l183.924-32.06v-2.532H229.204c-3.734 0 14.278 34.355 15.664 34.592" fill="#80d4c2"/><path d="M244.867 125.615l183.924 32.06v2.534H229.204c-3.734 0 14.278-34.354 15.664-34.595" fill="#80d4c2"/><text style="line-height:125%" x="458.109" y="632.029" transform="translate(0 -407.48) scale(.949 1.053)" font-size="217.773" letter-spacing="0" word-spacing="0" fill="#3a80cb" font-family="Sans"><tspan style="text-align:start;line-height:125%;-inkscape-font-specification:Roboto" x="458.109" y="632.029" font-size="217.773" fill="#3a80cb" font-family="Roboto">Dart<tspan style="text-align:start;line-height:125%;-inkscape-font-specification:Ubuntu" font-size="217.773" fill="#55c5a9" font-family="Roboto">Void</tspan></tspan></text><text style="line-height:125%" x="765.185" y="430.792" font-size="125.086" letter-spacing="0" word-spacing="0" fill="#55c5a9" font-family="Sans" transform="translate(0 -407.48)"/></g></svg>
	
        </a>
      </div>

      <nav class="collapse navbar-collapse navbar-collapse-header navbar-right" role="navigation">
        <ul class="nav navbar-nav">
          <li class=""><a href="/web/20150401020727/http://www.dartvoid.com:80/features/">Features</a></li>
          <li class=""><a href="/web/20150401020727/http://www.dartvoid.com:80/docs/">Documentation</a></li>
          <li class=""><a href="/web/20150401020727/http://www.dartvoid.com:80/company/">Company</a></li>
        </ul>
        <ul class="nav navbar-nav">
          <li><a href="https://web.archive.org/web/20150401020727/https://manage.dartvoid.com/">Sign in</a></li>
          <li class=""><a href="/web/20150401020727/http://www.dartvoid.com:80/signup/">Sign up</a></li>
        </ul>
      </nav>
    </div>
  </div>

  <div class="container-page content">
    <header class="jumbotron jumbotron-pattern">
      <div class="container">
        <h1><strong>Vane</strong></h1>
        <p class="lead"></p>
      </div>
    </header>

      <div class="navbar navbar-default navbar-static-top site-subnav" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".navbar-collapse-subheader">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>

      <nav class="collapse navbar-collapse navbar-collapse-subheader" role="navigation">
        <ul class="nav navbar-nav">
          <li class="active"><a href="/web/20150401020727/http://www.dartvoid.com:80/vane/">Overview</a></li>
          <li class=""><a href="/web/20150401020727/http://www.dartvoid.com:80/vane/middlewares/">Middlewares</a></li>
          <li class=""><a href="/web/20150401020727/http://www.dartvoid.com:80/vane/databases/">Database access</a></li>
          <li><a href="/web/20150401020727/http://www.dartvoid.com:80/docs/vaneapi/">API <i class="fa fa-external-link"></i></a></li>
          <li><a href="https://web.archive.org/web/20150401020727/https://github.com/DartVoid/Vane" target="_blank">Source <i class="fa fa-external-link"></i></a></li>
        </ul>
      </nav>
    </div>
  </div>

    <section class="jumbotron">
      <div class="container">
        <div class="row">
          <div class="col-md-10 docs-left">
            
<h2 id="introduction-to-vane">Introduction to Vane</h2>

<p>Vane is a framework to make it easy and fun to write Dart server-side applications. 
With Vane you can write both simple and advanced applications, with the powerful middleware system you can write 
reusable classes that you can build a chain out of that processes your requests. </p>

<p>There are only one type of handler class, the Vane class. Any class extending Vane can either act as a handler or be registered to run as a middleware class. 
Vane classes registered to act as middleware can do so either before or after the main class. </p>

<p>Middleware classes can run synchronously or asynchronously and you are guaranteed that they execute in the order you define. 
From any Vane class you can choose to execute the next class by running <code>next()</code> or to return to the client by running <code>close()</code>.</p>

<h2 id="summary">Summary</h2>
<ul>
  <li>Easy extendable class based core</li>
  <li>Pre-defined top level access to commonly used data such as request parameters, json bodies and file uploads</li>
  <li>A versatile handler system that allows you to register classes either as the main handler or as a middleware</li>
  <li>Middlewares can be defined to run synchronously or asynchronously  </li>
  <li>Middleware communication layer called <code>Tube</code></li>
  <li>Websockets out of the box</li>
  <li>Plug and play support for MongoDB (provided by <a href="https://web.archive.org/web/20150401020727/http://www.dartvoid.com/">DartVoid</a>)</li>
</ul>

<h2 id="what-framework-is-vane-inspired-by-or-similar-to">What framework is Vane inspired by or similar to?</h2>
<p>Vane is not inspired by any single framework but has rather been inspired by several different frameworks written in Java, PHP, Ruby and NodeJS. 
Some concepts are new and have been adapted specifically to cater the nature of Dart. 
Most specifically is the use of futures that does not translate directly to many existing frameworks in other languages.﻿ </p>

<p>Vane’s middleware system is inspired by similar middleware systems such as <a href="https://web.archive.org/web/20150401020727/http://rack.github.io/">Rack</a> for Ruby, 
<a href="https://web.archive.org/web/20150401020727/http://www.senchalabs.org/connect/">Connect</a> for NodeJS and <a href="www.playframework.com">Play</a> for Java.</p>

<p>Some features that Rack and Connect middlewares implement are either included by default in Vane or are abstracted to Nginx 
while running on <a href="https://web.archive.org/web/20150401020727/http://www.dartvoid.com/">DartVoid</a>. </p>

<p>At DartVoid we believe the best tools should always be used for the job, Nginx is very good at serving static files, 
Dart is very good for writing application logic.</p>

<h2 id="handlers">Handlers</h2>
<p>Vane supports three different types of handlers:</p>

<ol>
  <li>Vane handlers - Classes that extend the Vane class</li>
  <li>Podo handlers - “Plain Old Dart Objects”, normal classes that have one or more
functions with the @Route annotation</li>
  <li>Func handlers - Function handlers, normal dart function with the @Route annotation </li>
</ol>

<h3 id="vane-handler">Vane handler</h3>
<p>A vane handler is any class that extends the Vane class. When you extend the Vane class your 
handler functions get access to many helpers and features that are part of the Vane framework.
In a vane handler you have access to a set of top level helpers to makes life easier, some 
example of these are a ready to use parsed version of incomming json data called “json”. </p>

<p>A Vane class can either run on it’s own or in a pipeline of a set of Vane controllers. When 
mulitple a Vane controller is used in a pipeline to process a request those other than the 
main controller are called middleware controllers, but it’s not a different type of controller
and middleware controllers can themself also have their own middleware controllers. Inside a 
Vane controller you can either end the controller by returning <code>next()</code> or <code>close()</code>, if you 
return with <code>next()</code> the next middleware controller will run (if there is one, otherwise the 
call will be changed to a <code>close()</code> call). If you call <code>close()</code> that will end the request 
even if there are middleware controllers that have yet not run.  </p>

<p>Vane classes registered to as middleware can run either before or after 
the main controller. Middleware controller can run synchronously or asynchronously and 
you are guaranteed that they execute in the order you define. Per default middleware controllers
run synchronously any the next controller only starts when the current one have finished. You
can choose to run one or more middleware controllers in async and also combine both a set of 
synchronous and asynchronous controller to create more complex pipelines for processing.</p>

<div class="row">
  <div class="col-md-6">
    <h3 id="vane-example">Vane example:</h3>

    <pre class="prettyprint lang-dart">
class HelloVane extends Vane {
  @Route(&quot;/&quot;)
  Future World() { 
    return close(&quot;Hello world! (from vane handler)&quot;);
  }
}
</pre>
  </div>

  <div class="col-md-6">
    <h3 id="middleware-example">Middleware example:</h3>

    <pre class="prettyprint lang-dart">
class HelloVane extends Vane {
  var pipeline = [MyMiddleware, This]
  @Route(&quot;/&quot;)
  Future World() { 
    return close(&quot;Hello world! (from vane handler)&quot;);
  }
}

class MyMiddleware extends Vane {
  Future main() { 
    write(&quot;Hello from middleware!&quot;);
    return next();
  }
}
</pre>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <h3 id="podo-handler">Podo handler</h3>
    <p>A podo handler is a “Plain Old Dart Object”, basically any Dart class that have 1 or more
function handlers with declared with the @Route annotation.</p>
  </div>

  <div class="col-md-6">
    <h3 id="podo-example">Podo example:</h3>

    <pre class="prettyprint lang-dart">
class HelloPodo {
  @Route(&quot;/&quot;)
  void World(HttpRequest request) {
    request.response.write(&quot;Hello World! (from podo handler)&quot;);
    request.response.close();
  }
}
</pre>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <h3 id="func-handler">Func handler</h3>
    <p>A function handler is simple a function that takes at least 1 HttpRequest parameter and 
optionally 1 or more parameters that can be mapped from the url.</p>
  </div>

  <div class="col-md-6">
    <h3 id="func-example">Func example:</h3>

    <pre class="prettyprint lang-dart">
@Route(&quot;/&quot;)
void helloFuncWorld(HttpRequest request) {
  request.response.write(&quot;Hello World! (from func handler)&quot;);
  request.response.close();
}
</pre>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <h2 id="vane-server">Vane server</h2>
    <p>With Vane you don’t have to worry about writing a dart/web server, you focus on writing your 
controllers/handlers and Vane serves them for you automatically based on your @Route annotations.<br/>
All you need to do is to make sure they are in the same library and that you start the serve function.</p>
  </div>

  <div class="col-md-6">
    <h3 id="vane-server-example">Vane server example:</h3>

    <pre class="prettyprint lang-dart">
import &#39;dart:async&#39;;
import &#39;package:vane/vane.dart&#39;;

class HelloWorld extends Vane {
  @Route(&quot;/&quot;)
  Future Hello() {
    return close(&quot;Hello world&quot;);
  }
}

void main() =&gt; serve();
</pre>
  </div>
</div>

<h2 id="json">JSON</h2>
<p>The modern web breaths JSON, and so does Vane. For many developers JSON is today the obvious choice as a data exchange format and Dart 
being a language developed for the web also comes with JSON support out of the box. Vane makes it extra easy to return JSON from handlers 
by setting the content type to “application/json” and to convert any object written to <code>close</code> that is a List or Map to JSON 
(this default behaviour can of course also be overridden if needed). </p>

<p>Here are some example of handlers that returns JSON. The first two uses Vane’s close functions “auto encode to json” feature 
(works only for Lists and Maps) to send a list and a map respectivly to the client in JSON format. The third example uses 
Dart’s built in <code>convert</code> package to convert a map to json format and then writing it to the response and closes the request.</p>

<div class="row">
  <div class="col-md-6">
    <h3 id="map-to-json">Map to json</h3>

    <pre class="prettyprint lang-dart">
import &#39;dart:async&#39;;
import &#39;package:vane/vane.dart&#39;; 

class HelloJsonMap extends Vane {
  @Route(&quot;/&quot;)
  Future main() {
    // Define Map of Strings
    var jsonData = new Map&lt;String, String&gt;();

    // Add data to Map
    jsonData[&quot;Hello&quot;] = &quot;World&quot;;

    // Log data
    log.info(&quot;${jsonData}&quot;);

    // Send back data and let Vane convert it for you
    return close(jsonData);
  }
}

void main() =&gt; serve();

</pre>
  </div>

  <div class="col-md-6">
    <h3 id="list-to-json">List to json</h3>

    <pre class="prettyprint lang-dart">
import &#39;dart:async&#39;;
import &#39;package:vane/vane.dart&#39;;

class HelloJsonList extends Vane {
  @Route(&quot;/&quot;)
  Future main() {
    // Define List of Strings
    var jsonData = new List&lt;String&gt;();

    // Add data to the List
    jsonData.add(&quot;Hello&quot;);
    jsonData.add(&quot;World&quot;);

    // Log data 
    log.info(&quot;${jsonData}&quot;);
    
    // Send back data and let Vane convert it for you
    return close(jsonData);
  }
}

void main() =&gt; serve();
</pre>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <h2 id="websockets">Websockets</h2>
    <p>Writing a websocket handler with Vane is easy. There is a top level websocket object ready for you if you want to 
respond to incoming websocket requests. Here we start listening to the <code>ws</code> object, the websocket object, and then 
register callbacks for the different types of events that can happen. If data comes on the websocket we retrieve 
the value and then write it back to the client, appending the message with “Echo: “ using Dart’s string interpolation feature. 
If an error occurs we write it to the warning log, currently available in DartVoid’s app console (on stderr). 
When either the server or the client closes the connection we also close the handler. </p>

    <p>We return with <code>end</code> (which is a getter to one of Vane’s internal futures) instead of <code>close()</code> at the end of the handler. 
We do this since we don’t know for sure when <code>close()</code> will actually run, since it’s inside an async structure 
(read more about the relationship between <code>close()</code> and <code>end</code> in the topic “Closing a handler” below). 
In cases like this one where we close inside an async structure you should always return <code>end</code> at the end of your handler.</p>

    <p>More information about how you can use the websocket object can be found 
<a href="https://web.archive.org/web/20150401020727/https://api.dartlang.org/apidocs/channels/stable/#dart-io.WebSocket">here in the Dart API reference for the Websocket object</a>.</p>
  </div>

  <div class="col-md-6">
    <h3 id="websocket-example">Websocket example:</h3>
    <pre class="prettyprint lang-dart">
import &#39;dart:async&#39;;
import &#39;package:vane/vane.dart&#39;;

class WebsocketEchoClass extends Vane {
  @Route(&quot;/ws&quot;)
  Future main() {
    // Subscribe to the websocket stream
    var conn = ws.listen(null);

    // Handle incoming data
    conn.onData((data) {
      // Log request
      log.info(data);

      // Echo data back to the sender
      ws.add(&quot;Echo: $data&quot;);
    });

    // Handle and log errors
    conn.onError((e) =&gt; log.warning(e));

    // Handle and close connection
    conn.onDone(() =&gt; close());

    return end;
  }
}

void main() =&gt; serve();
</pre>
  </div>
</div>

<h2 id="closing-a-handler">Closing a handler</h2>
<p>In Dart asynchronous programming is very common and many times you will have one or more asynchronous structures in your code. 
Vane is implemented to work with Dart’s asynchronous programming model, not against it, therefore you should always return 
Vane’s internal future called <code>end</code> from all your handlers. It’s the same for both the main handler and for middleware handlers 
(remember middleware handlers also extend Vane so they are all equal in this respect). If you are new to the concept of Dart’s futures, 
we recommend that you read <a href="https://web.archive.org/web/20150401020727/https://www.dartlang.org/docs/tutorials/futures/">this article</a> before you continue reading.</p>

<p>Vane internal future called <code>end</code> is completed when you run either <code>close()</code> or <code>next()</code> in your handler. When you do that 
Vane knows that the handler has finished and that it can start the next middleware handler if there is one waiting. 
If you used <code>close()</code> Vane ignores any waiting middleware handlers and just finishes up the request and closes it.</p>

<p>In some cases, like the “Hello World” example, it might feel verbose to run both <code>close()</code> and <code>return end</code> after each other. 
In those cases you have the option to return with either <code>close()</code> or <code>next()</code> instead of <code>end</code>. This works because both <code>close()</code> and 
<code>next()</code> themself return <code>end</code>. This is a nice feature, but it should be used with care because it does not always work as expected 
if you try to use <code>return close()</code> inside an asynchronous structure. If you are not sure, then return <code>end</code> explicitly, but in general 
the rule is that if you return inside an async structure you should return <code>end</code> and if you return from asynchronous structure you can choose.</p>

<h3 id="wayscombinations-to-close-a-handler">4 ways/combinations to close a handler</h3>

<h4 id="close--return-end"><code>close() + return end</code></h4>

<pre class="prettyprint lang-dart">
  ...
  close();
  ...
  return end;
</pre>

<h4 id="next--return-end"><code>next() + return end</code></h4>

<pre class="prettyprint lang-dart">
  ...
  next();
  ...
  return end;
</pre>

<h4 id="return-close"><code>return close()</code></h4>

<pre class="prettyprint lang-dart">
  ...
  return close();
</pre>

<h4 id="return-next"><code>return next()</code></h4>

<pre class="prettyprint lang-dart">
  ...
  return next();
</pre>

<h2 id="good-to-know-checklist">Good to know checklist</h2>
<ul>
  <li>1 class must always extend Vane, we call that the <code>main handler</code> in our documentation</li>
  <li>0 or more Vane classes can be registered as middleware classes running before the main handler, the list of middleware running before the <code>main handler</code> is called the <code>pre</code> list.</li>
  <li>0 or more Vane classes can be registered as middleware classes running after the main handler, the list of middleware running after  the <code>main handler</code> is called the <code>post</code> list.</li>
  <li>At least 1 handler class must be guaranteed to run <code>close()</code>, otherwise you risk that your request might hang.</li>
  <li>To continue running next middleware handler (or the main handler) you should run <code>next()</code> from your handler.</li>
  <li>To end a request and not run any more middleware handlers (or the main handler) you should run <code>close()</code> from your handler.</li>
  <li>You can choose if your middleware should run synchronously and asynchronously, synchronously is the standard mode.</li>
  <li>The <code>end</code> future must always be returned from <code>main()</code>, you can do that explicitly with <code>return end</code> or implicitly with <code>return close()</code> or <code>return next()</code>.</li>
  <li>The last middleware class should try to use <code>close()</code> and not <code>next()</code>. 
But if <code>next()</code> is used in the last instance it will be converted to <code>close()</code> to prevent the server from hanging.</li>
</ul>


          </div>
        </div>
      </div>
    </section>
  </div>
  
  <footer>
    <div class="container">
      <div class="row">
        <div class="col-md-4 col-sm-4 col-xs-6 footer-columns">
          <h4>Company</h4>
          <ul>
            <li><a href="/web/20150401020727/http://www.dartvoid.com:80/company/">About Us</a></li>
            <li><a href="/web/20150401020727/http://www.dartvoid.com:80/company/events/">Events</a></li>
            <li><a href="/web/20150401020727/http://www.dartvoid.com:80/company/contact/">Contact</a></li>
          </ul>
        </div>

        <div class="col-md-4 col-sm-4 col-xs-6 footer-columns">
          <h4>Resources</h4>
          <ul>
            <li><a href="/web/20150401020727/http://www.dartvoid.com:80/docs/getting-started/">Getting started</a></li>
            <li><a href="/web/20150401020727/http://www.dartvoid.com:80/docs/">Documentation</a></li>
            <li><a href="/web/20150401020727/http://www.dartvoid.com:80/vane/">Vane</a></li>
          </ul>
        </div>
        
        <div class="col-md-4 col-sm-4 col-xs-6 footer-columns">
          <h4>Connect</h4>
          <ul>
            <li><a href="https://web.archive.org/web/20150401020727/http://blog.dartvoid.com/" target="_blank"><i class="fa fa-bullhorn"></i> Blog</a></li>
            <li><a href="https://web.archive.org/web/20150401020727/https://twitter.com/DartVoid/" target="_blank"><i class="fa fa-twitter"></i> Twitter</a></li>
            <li><a href="https://web.archive.org/web/20150401020727/https://github.com/DartVoid/" target="_blank"><i class="fa fa-github"></i> Github</a></li>
            <li><a href="https://web.archive.org/web/20150401020727/https://plus.google.com/+Dartvoid/" target="_blank"><i class="fa fa-google-plus"></i> Google+</a></li>
            <li><a href="https://web.archive.org/web/20150401020727/http://www.hipchat.com/gdLik3cWq" target="_blank"><i class="fa fa-comment"></i> Hipchat</a></li>
          </ul>
        </div>

        <div class="col-md-12 col-sm-12 col-xs-12">
          <a href="/web/20150401020727/http://www.dartvoid.com:80/" class="navbar-brand">
            
	<svg class="navbar-brand-logo" xmlns="http://www.w3.org/2000/svg" preserveaspectratio="xMidYMid meet" viewbox="0 0 1300 500"><g><path d="M54.406 169.06c0 82.495 66.874 149.365 149.368 149.365 82.49 0 149.364-66.87 149.364-149.365 0-82.497-66.874-149.367-149.364-149.367-82.494 0-149.368 66.87-149.368 149.367" fill="#3a80cb"/><path d="M94.058 169.06c0 71.543 58 129.54 129.542 129.54 71.543 0 129.538-57.997 129.538-129.54 0-71.547-57.995-129.54-129.538-129.54S94.058 97.512 94.058 169.06" fill="#4ba5e0"/><path d="M45.08 88.038l383.71 66.89v5.28H12.393c-7.8 0 29.794-71.662 32.687-72.17" fill="#55c5a9"/><path d="M45.08 255.723l383.71-66.885v-5.28H12.393c-7.8 0 29.794 71.664 32.687 72.165" fill="#55c5a9"/><path d="M244.867 218.15l183.924-32.06v-2.532H229.204c-3.734 0 14.278 34.355 15.664 34.592" fill="#80d4c2"/><path d="M244.867 125.615l183.924 32.06v2.534H229.204c-3.734 0 14.278-34.354 15.664-34.595" fill="#80d4c2"/><text style="line-height:125%" x="458.109" y="632.029" transform="translate(0 -407.48) scale(.949 1.053)" font-size="217.773" letter-spacing="0" word-spacing="0" fill="#3a80cb" font-family="Sans"><tspan style="text-align:start;line-height:125%;-inkscape-font-specification:Roboto" x="458.109" y="632.029" font-size="217.773" fill="#3a80cb" font-family="Roboto">Dart<tspan style="text-align:start;line-height:125%;-inkscape-font-specification:Ubuntu" font-size="217.773" fill="#55c5a9" font-family="Roboto">Void</tspan></tspan></text><text style="line-height:125%" x="765.185" y="430.792" font-size="125.086" letter-spacing="0" word-spacing="0" fill="#55c5a9" font-family="Sans" transform="translate(0 -407.48)"/></g></svg>
	
          </a>
        </div>

        <div class="col-md-12 col-sm-12 col-xs-12">
          <p>Copyright &copy; DartVoid AB. All rights reserved.</p>
        </div>
      </div>
    </div>
  </footer>
  
  <!-- Bootstrap JS -->
  <script src="https://web.archive.org/web/20150401020727js_/https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script type="text/javascript" src="/web/20150401020727js_/http://www.dartvoid.com:80/assets/js/bootstrap.min.js"></script>
    
  <!-- Prettify JS -->
  <script type="text/javascript" src="/web/20150401020727js_/http://www.dartvoid.com:80/assets/js/prettify.js"></script>
  <script type="text/javascript" src="/web/20150401020727js_/http://www.dartvoid.com:80/assets/js/lang-dart.js"></script>
  <script type="text/javascript" src="/web/20150401020727js_/http://www.dartvoid.com:80/assets/js/lang-yaml.js"></script>

  <!-- GA JS-->
  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//web.archive.org/web/20150401020727/http://www.google-analytics.com/analytics.js','ga');
    
    ga('create', 'UA-35167322-1', 'dartvoid.com');
    ga('send', 'pageview');
  </script>

  <!-- Knowledge Graph -->
  <script type="application/ld+json">
    {
      "@context" : "https://web.archive.org/web/20150401020727/http://schema.org/",
      "@type" : "Organization",
      "name" : "DartVoid",
      "url" : "https://web.archive.org/web/20150401020727/http://www.dartvoid.com/",
      "sameAs" : [
        "https://web.archive.org/web/20150401020727/https://plus.google.com/+Dartvoid",
        "https://web.archive.org/web/20150401020727/https://twitter.com/DartVoid",
        "https://web.archive.org/web/20150401020727/https://github.com/DartVoid"
      ]
    }
  </script>

  <!-- Site scripts--> 
  <script type="text/javascript" src="/web/20150401020727js_/http://www.dartvoid.com:80/assets/js/contact/contact.dart.js"></script>


</body>
</html>

<!--
     FILE ARCHIVED ON 02:07:27 Apr 01, 2015 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 07:02:45 Jan 17, 2019.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  LoadShardBlock: 158.699 (3)
  esindex: 0.009
  captures_list: 176.27
  CDXLines.iter: 11.922 (3)
  PetaboxLoader3.datanode: 169.886 (4)
  exclusion.robots: 0.356
  exclusion.robots.policy: 0.344
  RedisCDXSource: 1.825
  PetaboxLoader3.resolve: 20.299
  load_resource: 66.148
-->
